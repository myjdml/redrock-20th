{"version":3,"sources":["webpack:///./src/components/Text.vue","webpack:///./src/components/Text.vue?51a4","webpack:///./src/components/Text.vue?7c52"],"names":["id","class","name","props","setup","state","controlX","orienter","methods","start","e","o","onOrient","obj","tofix","num","Math","abs","GY","b","GX","g","console","log","x","y","on","this","getGrant","is_ios","window","DeviceOrientationEvent","requestPermission","then","alert","navigator","userAgent","match","mounted","w","innerWidth","Engine","Render","World","Composites","Bodies","engine","create","world","width","height","render","element","document","querySelector","options","wireframes","background","run","add","rectangle","isStatic","fillStyle","strokeStyle","stack","friction","restitution","frictionAir","circle","gravity","__scopeId"],"mappings":"2OACOA,GAAG,Q,EACN,eAAwB,OAAnBC,MAAM,QAAM,S,wEADnB,eAEM,MAFN,EAEM,CADJ,O,wFAUW,GACbC,KAAM,OACNC,MAAO,GAEPC,MAJa,SAIND,GACL,IAAME,EAAQ,eAAS,CACrBC,SAAU,GACVC,SAAU,KAEZ,yBACK,eAAOF,KAGdG,QAAS,CACPC,MADO,SACAC,GACL,IAAMC,EAAI,IAAI,IACdA,EAAEC,SAAW,SAAUC,GACrB,IAAMC,EAAQ,SAAAC,GAAE,OAAMA,EAAMC,KAAKC,IAAIF,GAAOA,EAAM,GAC5CG,EAAKF,KAAKC,IAAIJ,EAAIM,GAAK,IAAMH,KAAKC,IAAIJ,EAAIM,GAAK,IAAM,EAAIN,EAAIM,EAC7DC,EAAKJ,KAAKC,IAAIJ,EAAIQ,GAAK,GAAK,EAAIR,EAAIQ,EAC1CC,QAAQC,IAAI,MAAQT,EAAMM,GAAM,KAAON,EAAMI,IAC7CR,EAAEc,EAAIV,EAAMM,GACZV,EAAEe,EAAIX,EAAMI,GACZI,QAAQC,IAAI,IAEdD,QAAQC,IAAIZ,EAAEC,UACdD,EAAEe,KACFC,KAAKpB,SAAWI,GAElBiB,SAhBO,WAiBDD,KAAKE,UACPC,OAAOC,uBAAuBC,oBAAoBC,MAAK,SAAA5B,GACrD,OAAQA,GACN,IAAK,UACH,MACF,IAAK,SACH6B,MAAM,aACN,MACF,IAAK,SACHA,MAAM,QACN,WAKVL,OAhCO,WAiCL,QAAIM,UAAUC,UAAUC,MAAM,mCAOlCC,QArDa,WAsDX,IAAMC,EAAIT,OAAOU,WAKXC,EAAS,IAAOA,OAChBC,EAAS,IAAOA,OAChBC,EAAQ,IAAOA,MACfC,EAAa,IAAOA,WACpBC,EAAS,IAAOA,OAEhBC,EAASL,EAAOM,SAChBC,EAAQF,EAAOE,MAEfC,EAAeV,EAAI,IAAX,IACRW,EAAS,IAETC,EAAST,EAAOK,OAAO,CAC3BK,QAASC,SAASC,cAAc,SAChCR,OAAQA,EACRS,QAAS,CACPL,OAAQA,EACRD,MAAOA,EACPO,YAAY,EACZC,WAAY,4BAKhBhB,EAAOiB,IAAIZ,GACXJ,EAAOgB,IAAIP,GAGXR,EAAMgB,IAAIb,EAAOE,MAAO,CACtBH,EAAOe,UAAU,EAAG,EAAG,IAAMrB,EAAI,IAAK,EAAG,CACvCsB,UAAU,EACVV,OAAQ,CACNW,UAAW,yBACXC,YAAa,4BAGjBlB,EAAOe,UAAU,EAAG,EAAG,EAAG,IAAM,CAC9BC,UAAU,EACVV,OAAQ,CACNW,UAAW,yBACXC,YAAa,4BAGjBlB,EAAOe,UAAU,EAAG,IAAM,IAAMrB,EAAI,IAAK,EAAG,CAC1CsB,UAAU,EACVV,OAAQ,CACNW,UAAW,yBACXC,YAAa,4BAGjBlB,EAAOe,UAAU,IAAMrB,EAAI,IAAK,EAAG,EAAG,IAAM,CAC1CsB,UAAU,EACVV,OAAQ,CACNW,UAAW,yBACXC,YAAa,8BAKnB,IAAMC,EAAQpB,EAAWoB,MAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,WAC/C,OAAOnB,EAAOe,UACZ,EACA,EACA,IACA,IACA,CACEK,SAAU,GACVC,YAAa,GACbC,YAAa,SASbC,EAASxB,EAAWoB,MAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,WAChD,OAAOnB,EAAOuB,OACZ,IACA,IACA,GACA,CACEH,SAAU,GACVC,YAAa,GACbC,YAAa,SASnBxB,EAAMgB,IAAIX,EAAO,CAACgB,EAAOI,IAEzBzC,KAAKC,WAELD,KAAKlB,MAAMqC,EAAOE,MAAMqB,W,UCpK5B,EAAOlB,OAAS,EAChB,EAAOmB,UAAY,kBAEJ,gB,kCCRf","file":"js/chunk-518f3c2d.3ebf2c6e.js","sourcesContent":["<template>\n  <div id=\"text\">\n    <div class=\"main\"></div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from '@vue/reactivity'\n// import { onMounted } from '@vue/runtime-core'\nimport Matter from 'matter-js'\nimport Orienter from '../utils/orienter'\n\nexport default {\n  name: 'Text',\n  props: {\n  },\n  setup (props) {\n    const state = reactive({\n      controlX: {},\n      orienter: {}\n    })\n    return {\n      ...toRefs(state)\n    }\n  },\n  methods: {\n    start (e) {\n      const o = new Orienter()\n      o.onOrient = function (obj) {\n        const tofix = num => (num ? Math.abs(num) / num : 0)\n        const GY = Math.abs(obj.b) < 10 || Math.abs(obj.b) > 170 ? 0 : obj.b\n        const GX = Math.abs(obj.g) < 10 ? 0 : obj.g\n        console.log('GX' + -tofix(GX) + 'GY' + tofix(GY))\n        e.x = tofix(GX)\n        e.y = tofix(GY)\n        console.log(1)\n      }\n      console.log(o.onOrient)\n      o.on()\n      this.orienter = o\n    },\n    getGrant () {\n      if (this.is_ios()) {\n        window.DeviceOrientationEvent.requestPermission().then(state => {\n          switch (state) {\n            case 'granted':\n              break\n            case 'denied':\n              alert('你拒绝了使用陀螺仪')\n              break\n            case 'prompt':\n              alert('其他行为')\n              break\n          }\n        })\n      }\n    },\n    is_ios () {\n      if (navigator.userAgent.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)) {\n        return true\n      } else {\n        return false\n      }\n    }\n  },\n  mounted () {\n    const w = window.innerWidth\n    // const h = window.innerHeight\n    // let ratio = this.getDevicePixelRatio();\n    // console.log(ratio);\n\n    const Engine = Matter.Engine\n    const Render = Matter.Render\n    const World = Matter.World\n    const Composites = Matter.Composites\n    const Bodies = Matter.Bodies\n\n    const engine = Engine.create()\n    const world = engine.world\n    // 初始化引擎\n    const width = 375 * (w / 375)\n    const height = 1000\n    // console.log(height, width);\n    const render = Render.create({\n      element: document.querySelector('.main'),\n      engine: engine,\n      options: {\n        height: height,\n        width: width,\n        wireframes: true,\n        background: 'rgba(255, 255, 255, 0)'\n      }\n    })\n    // this.controlX = engine.world.gravity\n    // engine.world.gravity.x = 1\n    Engine.run(engine)\n    Render.run(render)\n    // 挂载引擎\n    // 生成墙壁\n    World.add(engine.world, [\n      Bodies.rectangle(0, 0, 750 * w / 375, 1, {\n        isStatic: true,\n        render: {\n          fillStyle: 'rgba(255, 255, 255, 0)',\n          strokeStyle: 'rgba(255, 255, 255, 0)'\n        }\n      }),\n      Bodies.rectangle(0, 0, 1, 2000, {\n        isStatic: true,\n        render: {\n          fillStyle: 'rgba(255, 255, 255, 0)',\n          strokeStyle: 'rgba(255, 255, 255, 0)'\n        }\n      }),\n      Bodies.rectangle(0, 1000, 750 * w / 375, 1, {\n        isStatic: true,\n        render: {\n          fillStyle: 'rgba(255, 255, 255, 0)',\n          strokeStyle: 'rgba(255, 255, 255, 0)'\n        }\n      }),\n      Bodies.rectangle(375 * w / 375, 0, 1, 2000, {\n        isStatic: true,\n        render: {\n          fillStyle: 'rgba(255, 255, 255, 0)',\n          strokeStyle: 'rgba(255, 255, 255, 0)'\n        }\n      })\n    ])\n    // 生成正方体\n    const stack = Composites.stack(0, 0, 1, 1, 0, 0, function () {\n      return Bodies.rectangle(\n        0,\n        0,\n        200,\n        200,\n        {\n          friction: 0.1,\n          restitution: 0.2,\n          frictionAir: 0.15\n          // render: {\n          //   sprite: {\n          //     texture: that.img.src,\n          //   },\n          // },\n        }\n      )\n    })\n    const circle = Composites.stack(0, 0, 1, 1, 0, 0, function () {\n      return Bodies.circle(\n        300,\n        100,\n        25,\n        {\n          friction: 0.1,\n          restitution: 0.2,\n          frictionAir: 0.15\n          // render: {\n          //   sprite: {\n          //     texture: that.img.src,\n          //   },\n          // },\n        }\n      )\n    })\n    World.add(world, [stack, circle])\n\n    this.getGrant()\n    // this.start(engine.world.gravity)\n    this.start(engine.world.gravity)\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import { render } from \"./Text.vue?vue&type=template&id=3b7b7f65&scoped=true&bindings={\\\"start\\\":\\\"options\\\",\\\"getGrant\\\":\\\"options\\\",\\\"is_ios\\\":\\\"options\\\"}\"\nimport script from \"./Text.vue?vue&type=script&lang=js\"\nexport * from \"./Text.vue?vue&type=script&lang=js\"\n\nimport \"./Text.vue?vue&type=style&index=0&id=3b7b7f65&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-3b7b7f65\"\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Text.vue?vue&type=style&index=0&id=3b7b7f65&scoped=true&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Text.vue?vue&type=style&index=0&id=3b7b7f65&scoped=true&lang=css\""],"sourceRoot":""}